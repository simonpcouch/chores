<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with pal • pal</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with pal">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/pal.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/custom.html">Custom pals</a></li>
    <li><a class="dropdown-item" href="../articles/gallery.html">Gallery</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/simonpcouch/pal/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with pal</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/simonpcouch/pal/blob/main/vignettes/pal.Rmd" class="external-link"><code>vignettes/pal.Rmd</code></a></small>
      <div class="d-none name"><code>pal.Rmd</code></div>
    </div>

    
    
<p>Pals are persistent, ergonomic LLM assistants designed to help you
complete repetitive, hard-to-automate tasks quickly.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/simonpcouch/pal" class="external-link">pal</a></span><span class="op">)</span></span></code></pre></div>
<p>The pal package ships with a number of pre-engineered “roles.” A pal
role is a keyword that succinctly describes what the pal is intended to
do and serves as an identifier to match the pal with its <em>prompt</em>
and <em>interface</em>. A pal’s prompt is just a markdown file with
enough context and examples to teach a model to carry out a given task
well. A pal’s interface determines whether it replaces, prefixes, or
suffixes the selected code. For example:</p>
<ul>
<li>The <code>"testthat"</code> pal helps you transition your R
package’s unit tests to the third edition of testthat. Its prompt shows
the model how to convert to snapshot tests, disentangle nested
expectations, and transition from deprecated functions. It replaces the
selected code.</li>
<li>The <code>"roxygen"</code> pal helps you quickly template out
royxgen documentation for a function. Its prompt shows the model how to
write high-quality stub <code>@param</code> and <code>@returns</code>
entries that can be later extended by the developer. It prefixes the
selected code.</li>
</ul>
<div class="section level2">
<h2 id="choosing-a-model">Choosing a model<a class="anchor" aria-label="anchor" href="#choosing-a-model"></a>
</h2>
<p>Under the hood, pals are driven by Large Language Models (LLMs). To
use pals, you will need an API key for a commercial model or a
connection to a locally hosted model.</p>
<p>Pals use the <a href="https://github.com/tidyverse/ellmer" class="external-link">ellmer</a>
package to interface with LLMs. Any model supported by ellmer is
supported by pal.</p>
<p>As of October 2024, we highly recommend <a href="https://www.anthropic.com/news/claude-3-5-sonnet" class="external-link">Anthropic’s
Claude Sonnet 3.5</a> as the model to power your pals. Compared to other
models we’ve tried, Claude is most likely to generate syntactically
valid code that aligns with the pal’s prompt well. As such, Claude is
the default model used by pal. If you want to use Claude with pal, the
only additional setup step you need is to set an <a href="https://console.anthropic.com/" class="external-link"><code>ANTHROPIC_API_KEY</code></a>
in your <code>.Renviron</code>—you might use
<code>usethis::edit_r_environ()</code> to open the file, and then
set:</p>
<pre class="env"><code><span><span class="va">ANTHROPIC_API_KEY</span><span class="op">=</span><span class="va">your.key.here</span></span></code></pre>
<p>To use another model to power your pals, use the <code>.pal_fn</code>
and <code>.pal_args</code> options. <code>.pal_fn</code> is the name of
a <code>chat_*()</code> function from ellmer, and <code>.pal_args</code>
is a list of any non-default arguments you’d like to supply to that
function. For example, to use models from OpenAI, you might write:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  .pal_fn <span class="op">=</span> <span class="st">"chat_openai"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Or, to use GPT 4o mini specifically, you might write:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  .pal_fn <span class="op">=</span> <span class="st">"chat_openai"</span>,</span>
<span>  .pal_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"gpt-4o-mini"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To use a local model with ollama, you might write:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  .pal_fn <span class="op">=</span> <span class="st">"chat_ollama"</span>,</span>
<span>  .pal_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"qwen2.5-coder:14b"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You’ll probably want pal to always use whichever model you’re
configuring with this option. To make this selection persist across
sessions, add that <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code> code to your
<code>.Rprofile</code>. You might use
<code>usethis::edit_r_profile()</code> to open the file. After making
those changes and restarting R, your pal will use the new model.</p>
</div>
<div class="section level2">
<h2 id="the-pal-addin">The pal addin<a class="anchor" aria-label="anchor" href="#the-pal-addin"></a>
</h2>
<p>Rather than through package functions directly, pals are interfaced
with via the pal addin. Once you have a default model set up, you’re
ready to use the package in any RStudio session (even if you haven’t
loaded the package yet).</p>
<p>Just:</p>
<ul>
<li>Select some code.</li>
<li>Trigger the pal addin.</li>
<li>Type in a pal “role.” Once it’s autocompleted, press Enter.</li>
<li>Watch your code be rewritten.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/simonpcouch/pal/refs/heads/main/inst/figs/addin.gif"</span><span class="op">)</span></span></code></pre></div>
<p><img src="https://raw.githubusercontent.com/simonpcouch/pal/refs/heads/main/inst/figs/addin.gif" alt="A screencast of an RStudio session. An .R file is open in the editor with a function definition. The user selects various subsets of the function and, after selecting from a dropdown menu, the pal assistant converts erroring code and drafts function documentation."></p>
<p>Pals are interfaced with the via the pal addin. For easiest access,
we recommend registering the pal addin to a keyboard shortcut.</p>
<p><strong>In RStudio</strong>, navigate to
<code>Tools &gt; Modify Keyboard Shortcuts &gt; Search "Pal"</code>—we
suggest <code>Ctrl+Alt+P</code> (or <code>Ctrl+Cmd+P</code> on
macOS).</p>
<p><strong>In Positron</strong>, you’ll need to open the command
palette, run “Open Keyboard Shortcuts (JSON)”, and paste the following
into your <code>keybindings.json()</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>        <span class="dt">"key"</span><span class="fu">:</span> <span class="st">"Ctrl+Cmd+P"</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>        <span class="dt">"command"</span><span class="fu">:</span> <span class="st">"workbench.action.executeCode.console"</span><span class="fu">,</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>        <span class="dt">"when"</span><span class="fu">:</span> <span class="st">"editorTextFocus"</span><span class="fu">,</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>        <span class="dt">"args"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>            <span class="dt">"langId"</span><span class="fu">:</span> <span class="st">"r"</span><span class="fu">,</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>            <span class="dt">"code"</span><span class="fu">:</span> <span class="st">"pal::.init_addin()"</span><span class="fu">,</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>            <span class="dt">"focus"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    <span class="fu">}</span></span></code></pre></div>
<p>The analogous keybinding on non-macOS is <code>Ctrl+Alt+P</code>.
That said, change the <code>"key"</code> entry to any keybinding you
wish!</p>
<p>Once those steps are completed, you’re ready to use pals with a
keyboard shortcut.</p>
</div>
<div class="section level2">
<h2 id="adding-custom-pals">Adding custom pals<a class="anchor" aria-label="anchor" href="#adding-custom-pals"></a>
</h2>
<p>While the pal package comes with three pals for package development,
one can use pals for all sorts of coding tasks in R, from interactive
data analysis to authoring with Quarto, or even for coding tasks in
languages other than R! All you need to set up your own pal is a
markdown file.</p>
<p>To learn more about adding custom pals as well as how to share them
with others, see the <a href="custom.html">“Custom pals” vignette</a>
with <code><a href="../articles/custom.html">vignette("custom", package = "pal")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Simon Couch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
